language: ruby
script: bundle exec middleman build
rvm:
  - 2.4.1
cache: bundler
env:
  global:
  - GIT_COMMITTER_NAME=Yuichiro Someya
  - GIT_COMMITTER_EMAIL=ayemos.y@gmail.com
  - GIT_AUTHOR_NAME=Yuichiro Someya
  - GIT_AUTHOR_EMAIL=ayemos.y@gmail.com
  - secure: "ErQUI0UwfB05ASMRLNagUd5Ckkw7+X5afu1cJg2WznFxlcTYHQ8UhDhxVbKEELuvOA0OBMqQyXQEodA/KITi/qHiHT+lNCSWN/39Xzg81nhRiJY/iC7YONg0LfmVAzy2Ky9L+9Jf51HLYvjxewIOn/GdQheZUAVX6KOYIFahsXZjHMFJWjRQIdzCqaZ48bdzErSDptD5JfDu8YIsa/w2YfZeroTNMlyAxqG27SgHst07WAOST6qzKd7kjxyg00OdUtt+eVAN9Kd/j36ZVKlzkJkGSAZv/wykjjjWdVMANIyhmntTVBovuZ8ZX4YipthKNSP4sbk94BuysDSf23ZRuzAoWu95f4psuHq304msFnBz3mEyjyovM2qsICVeVKwsfXELA4mEc1NxopvUUhOuiXDYcf8va4LWNJm4QkFAg3RxOvHpIfLQaBU60lIF5NpuAT0CNXKkkJBx0vSRDc/nEMwfyFvLucU5vnCm2tatLxm8Kr4Pkntxu/KAGwigHl7yMF8oKAc5zDY9G5BzCNOerjea8U0AeoRtf/BQ03+1Hp8QLu7mJqFausyXy6N82b/qSOOrmMeSomtw2abQEEqxAKCOWVlYo1y7bdHOc23gUgPhxDPHZub+5hvqcYgBbpF3yKgB7LaV3+1eX6Mao7SB5SIXd4jT2Hb02a97lZL3R7c="

before_script:
- git clone --quiet https://github.com/ayemos/source.leather-port.git
- git clone --quiet https://github.com/ayemos/leather-port.git build
after_success:
- cd build
- git add -A
- git commit -m 'Update'
- '[ "$TRAVIS_BRANCH" == "master" ] && [ $GH_TOKEN ] && git push --quiet https://$GH_TOKEN@github.com/ayemos/leather-port.git
  master'
