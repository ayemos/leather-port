language: ruby
script: bundle exec middleman build
rvm:
  - 2.4.1
env:
  global:
  - GIT_COMMITTER_NAME=Yuichiro Someya
  - GIT_COMMITTER_EMAIL=ayemos.y@gmail.com
  - GIT_AUTHOR_NAME=Yuichiro Someya
  - GIT_AUTHOR_EMAIL=ayemos.y@gmail.com
  - secure: "svU1AEEV3XTxppTF+EZb2Y8UfvxwFjeGd9vK38pD/oml54bxBppr7wUhuXsz2BeU2j7b2xgipHfIMV0FGHfE1hspA5HFvtItzk0iYEwvTMPMJPNFauD3soK6V7jbiHBy9ZH9R5hE19TQ2wVTIGmn5IQrdGDutyCtMxG+IybGPZR8axXKfF2qGxmT6vfHbfRIbwP0NPnr/HYJM0EcY2gk/3P78LEbRcSexRzNM0yDi53LFjb5B/6xjGCQv9Y0qiJD4C4LD2xnZlkSmVgUAcrlnFJnPfpXdPfO9UpKjqBfJoeEvy9mfP+uxWyQv9ZTAxVR7bONQUIpHkGvrmXvWSRzqTbRRA/PCmYC2QdtlZKebEKFVE2FLxjU2Ofgm1JrFRGD68BTxoTcehJQmhhPYQib0c5PnmCU48fmniEpxTZf0qpaHWXNbqpAUgLSXSofEbdF4V0N7AfY5+AA+0c8YhWVbevqODmtWV25+IXVPLaicvM4Loo519ddecb18h4n3A+iOE+NdvgHrSwPkKatzEOQYfuOrZd1Rsa6O2p5QJcyJBAN17gDHX2LexHPGSACo/CUabqOkCNkC36gq0DXYhfw5Xfpyngfg30kI+4K5x6NPgeXqXbM5PgsKNAze6ry/bQ3G7EtWFt2rDfTPU/zyjo9TYfS0UysqK1sjXPYQdS2WH4="

before_script:
- git clone --quiet https://github.com/ayemos/source.leather-port.git
- git clone --quiet https://github.com/ayemos/leather-port.git build
after_success:
- cd build
- git add -A
- git commit -m 'Update'
- '[ "$TRAVIS_BRANCH" == "master" ] && [ $GH_TOKEN ] && git push --quiet https://$GH_TOKEN@github.com/ayemos/leather-port.git
  master'
