language: ruby
script: bundle exec middleman build
rvm:
  - 2.4.1
cache: bundler
env:
  global:
  - GIT_COMMITTER_NAME=Yuichiro Someya
  - GIT_COMMITTER_EMAIL=ayemos.y@gmail.com
  - GIT_AUTHOR_NAME=Yuichiro Someya
  - GIT_AUTHOR_EMAIL=ayemos.y@gmail.com
  - secure: abwcvkzlRxilFmdPRrgsLm8h1/1ErxVofHy9ZWkXk4trDY9Cbt6gg8Nv74aIrZcfKsN3VnjB8WIb6xTNw6vXJW6c4+449+bCmd5NMXETSnngUioR0OeuFTblo7vCHrjBrTSxYntEXuvKlN0A+3mlv/8C+PH1mQhkFGn6ufFr40t1MZu8RzUfB4JG1a53Ymr7EwuJoco4cd6Qg9bQ6Xw0YoyMCdVRilMY6F1Cel1bomCmfubvDHnL4DfhqU1EdmvfBTqw+3HbvWzk/cUsHBnz93Mr5uZtU/MFZD2m6dWrNYoogopXB8G6DAkG47j9KfoJhh6veu2t2c03gKIAfov7WKpZ4/zY6J97ngf38J+VP97tqaocnGATBYONmlWpxsqSBtRTwomRbKDhdXt6QVxwIbA/+NPJQZiRGVbsvZ1trY6oZC8bzamVv71TeuFExWmjF5XT9iEu7V71OdaJUIbjEjIhBgu7yJdvIlMqPM3z64tPzHinEQmmf69Bp35wvJbO5jS0iNygO/f6upSrFjsblDbG5eI5n8BNvZSObz7LtJbyvgF/DbpGu4rTNzf5roKylI22QpJ8sbMgURcIrqhbAIywE1wswyxWSKDQktBG9J0v4VRymjIGf2LiOrLW1XWzzOeYFjMKno72rbtBytKOFhX+aCYIHSMRDR5oTDei9Cw=

before_script:
- git clone --quiet https://github.com/ayemos/source.leather-port.git
- git clone --quiet https://github.com/ayemos/leather-port.git build
after_success:
- cd build
- git add -A
- git commit -m 'Update'
- '[ "$TRAVIS_BRANCH" == "master" ] && [ $GH_TOKEN ] && git push --quiet https://$GH_TOKEN@github.com/ayemos/leather-port.git
  master'
