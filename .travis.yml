language: ruby
script: bundle exec middleman build
rvm:
  - 2.4.1
cache: bundler
env:
  global:
  - GIT_COMMITTER_NAME=Yuichiro Someya
  - GIT_COMMITTER_EMAIL=ayemos.y@gmail.com
  - GIT_AUTHOR_NAME=Yuichiro Someya
  - GIT_AUTHOR_EMAIL=ayemos.y@gmail.com
  - secure: "Mh0lagPMmj02zGcfHW38/3D9ZoJ4KfnUvGbsm3Fnj1prTr3ZEBC89CzY36Y3jybW1bf/xjVNseOIFKBkg2U89GtRMsf4shcANra0cQzM/PngflLSNjxHhf9cwBfQrm0KlypPHqaubY+e5Gh0EKHpabPXQFEP3bX4aCEjcUWi8Z3sXsxNQdlM/lkX0AZzmifxn7aa1km+OBX90/6r/zasq+/uOsmgaNhY0arc2VBfTvtJ1nRjC6CHmoGkugrrWrK3kqlUmC2lYT8VsWdqHN7heFPLDwXpL78zEkZZS/HtClycAHvNT+ViyOJ2dnBKY2ZAQ3JhpJu82ZNCdye80ziTb6VnTFBa8yPBsc4lF61mcZrb3AydYtrC809rjkHIuYAqInK5IBWyM4uCtmiqCb5cuM5JPEHIqaRaRUz924WA4ldH9QocLfd8yu+8FF1EfHE/eeT9mweerhFL0qO2XMsxn6M/N+iwT76eiImwdl+ibmdy+LBuv49z9Rg6bXsz/aWxTlMG5yPLf/vmsgh7zO5eI3reruTBIuLy6cEbsZtkoo42ilUEFa9Ep60XtQI/r/tQ5fsHdtvI/PuOjRRYHoYQxFic2vsqnzwFc6Kt7/VvVacj7B2nir3K8D5MhzpsRbbhiN3Wyd3v4RUkuxekDBCHFKmzUf0YX3MiIsENIqNYvoE="
before_script:
- git clone --quiet https://github.com/ayemos/source.leather-port.git
- git clone --quiet https://github.com/ayemos/leather-port.git build
after_success:
- cd build
- git add -A
- git commit -m 'Update'
- '[ "$TRAVIS_BRANCH" == "master" ] && [ $GH_TOKEN ] && git push --quiet https://$GH_TOKEN@github.com/ayemos/leather-port.git
  master'
